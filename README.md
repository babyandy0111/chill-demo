# Chill App

這是一個多人即時戰略地圖遊戲，玩家可以探索真實世界地圖，佔領土地，並與其他玩家互動。

## 核心功能

### 1. 3D 地球儀探索
應用程式以一個互動式的 3D 地球儀作為起點。玩家可以旋轉、縮放地球，尋找感興趣的地點，並無縫過渡到該地點的 2D 詳細地圖。

### 2. 戰爭迷霧與領土佔領
- **探索未知：** 2D 地圖採用「戰爭迷霧」模式，大部分區域初始時被迷霧覆蓋。
- **開拓視野：** 玩家可以透過 GPS 定位，在自己所在的真實世界位置自動清除周圍的迷霧，擴大可見範圍。
- **佔領領土：** 玩家可以消耗遊戲內資源（雲朵），佔領任何已探索的網格，將其變為自己的領土。已佔領的領土會以醒目的顏色標記。

### 3. 玩家互動與標記
- **即時玩家位置：** 地圖上會以玩家頭像的形式，即時顯示附近的其他玩家位置，增加了社區的互動感和真實感。
- **個人化標記：** 每個玩家的頭像都是獨特的，讓玩家可以在地圖上輕鬆識別彼此。

### 4. 資源與排行榜
- **雲朵資源：** 「雲朵」是遊戲中的核心資源，用於佔領土地。雲朵會隨著時間自動恢復。
- **全球排行榜：** 遊戲內建排行榜系統，玩家可以查看自己和他人佔領的土地數量排名，增加了遊戲的競爭性和目標感。

## 專案結構與主要元件

-   **`GlobeView.jsx`**: 應用程式的進入點，實現 3D 互動地球儀。
-   **`App.jsx`**: 2D 地圖的核心容器，整合所有地圖相關的 UI 和交互邏輯。
-   **`MapWithClouds.jsx`**: 承載 Google Map 實例，並處理地圖上的點擊、移動等基本交互。
-   **`CanvasOverlay.jsx`**: 遊戲的核心視覺層。它使用 Canvas 在地圖上繪製戰爭迷霧、已佔領領土的顏色以及各種交互效果。
-   **`UserMarkersLayer.jsx`**: 負責在地圖上繪製所有玩家的頭像標記，並實現了聚類功能，確保在宏觀視角下地圖的清晰度。
-   **`CellInfoWindow.jsx`**: 當玩家點擊一個未佔領的格子時，彈出此視窗，顯示該地點的資訊並提供「佔領」選項。
-   **`store.js`**: 使用 Zustand 進行全局狀態管理，統一處理所有遊戲數據，如雲朵數量、領土列表等。

## 未來功能規劃

### 1. 玩家等級與成長系統
-   **目標**: 引入個人成長路徑，提供持續的遊戲目標和獎勵。
-   **玩法規則**:
    -   **經驗值獲取**: 玩家通過兩種核心行為獲得經驗值 (XP)：
        -   **探索經驗**: 每當玩家首次探索一個新的網格時，獲得少量 XP。
        -   **佔領經驗**: 每當玩家成功佔領一個新的網格時，獲得大量 XP。
    -   **等級提升**: 積累足夠的 XP 即可提升玩家等級。等級提升所需的 XP 將呈指數級增長，確保遊戲的長期挑戰性。
-   **等級獎勵**:
    -   **雲朵上限提升**: 每次升級都會增加玩家的「雲朵」儲存上限，允許玩家儲存更多資源。
    -   **聯盟人數擴展**: 每次升級都會增加玩家可邀請的聯盟成員數量上限，鼓勵社交互動和團隊合作。

### 2. 高級排行榜系統
-   **目標**: 建立一個更多維度、更具策略性的全球排名，鼓勵玩家全面發展。
-   **玩法規則**:
    -   **綜合分數排名**: 排名不再只看單一指標，而是根據一個綜合分數進行排序。該分數由以下兩部分加權構成：
        1.  **領土擴張貢獻**: 玩家佔領的網格總數，體現玩家的絕對實力。
        2.  **國家探索貢獻**: 玩家在特定國家內探索的面積比例。這鼓勵玩家為自己所在的國家「開圖」，探索國境內的每一寸土地。玩家在一個國家內探索的面積比例越高，對該國家的貢獻分越高。
    -   **多維度視圖**: 排行榜將提供不同的視圖，例如全球總榜、國家榜、聯盟榜等，讓玩家可以從不同角度了解自己的表現。

### 3. 聯盟系統
-   **目標**: 允許多個玩家組成聯盟，共同對抗或合作。
-   **效果**: 增加遊戲的社交和策略維度。
-   **功能**:
    -   聯盟成員可以共享彼此的視野（已探索的區域）。
    -   可以發起聯盟戰爭，爭奪特定區域的控制權。
    -   設立聯盟排行榜，激發團隊榮譽感。
